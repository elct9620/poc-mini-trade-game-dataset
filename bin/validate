#!/usr/bin/env ruby
# frozen_string_literal: true

# link:docs/features/validation.md
# Command-line tool to validate CSV files for the mini trade game dataset.
# Ensures JSON validity and game mechanics constraints.

require_relative '../lib/csv_validator'

if ARGV.empty?
  puts "Usage: bundle exec ruby bin/validate path/to/your/file.csv"
  exit 1
end

file_path = ARGV[0]

unless File.exist?(file_path)
  puts "Error: File '#{file_path}' not found"
  exit 1
end

errors = CsvValidator.validate(file_path)

if errors.empty?
  exit 0
else
  puts errors.join("\n")
  exit 1
end
